<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.prize.lottery.mapper.LotteryPickMapper">

    <resultMap id="LotteryPickMap" type="com.prize.lottery.po.lottery.LotteryPickPo">
        <id column="id" property="id"/>
        <result column="lottery" property="lottery"/>
        <result column="period" property="period"/>
        <result column="user_id" property="userId"/>
        <result column="red_ball" property="redBall"/>
        <result column="blue_ball" property="blueBall"/>
        <result column="gmt_create" property="gmtCreate"/>
        <result column="gmt_modify" property="gmtModify"/>
    </resultMap>

    <insert id="addLotteryPick" parameterType="com.prize.lottery.po.lottery.LotteryPickPo"
            useGeneratedKeys="true" keyProperty="id">
        insert into lottery_pick(lottery,
                                 period,
                                 user_id,
                                 red_ball,
                                 blue_ball,
                                 gmt_create,
                                 gmt_modify
                                )
        values (#{lottery},
                #{period},
                #{userId},
                #{redBall},
                #{blueBall},
                current_time,
                current_time
               ) on duplicate key
        update
            red_ball=
        values (red_ball), blue_ball=
        values (blue_ball), gmt_modify= current_time
    </insert>

    <select id="getLotteryPickByUk" resultMap="LotteryPickMap">
        select
            id,
            lottery,
            period,
            user_id,
            red_ball,
            blue_ball,
            gmt_modify
        from
            lottery_pick
        where
              lottery = #{lottery}
          and period = #{period}
          and user_id = #{userId}
    </select>

</mapper>
